var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(t){a(t)}}function s(e){try{u(r["throw"](e))}catch(t){a(t)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(i=a[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,a=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(r){n=[6,r],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},alien;!function(e){var t=function(){function e(){}return e.prototype.checkNeedLoad=function(e){for(var t=!1,n=0,r=e.length;r>n;n++)if(!RES.isGroupLoaded(e[n])){t=!0;break}return t},e.prototype.loadResGroups=function(e,t){return void 0===t&&(t=null),__awaiter(this,void 0,void 0,function(){var n,r,n,r;return __generator(this,function(o){switch(o.label){case 0:for(this._progressCallback=t,this._total=0,this._loaded=0,n=0,r=e.length;r>n;n++)if(!RES.isGroupLoaded(e[n])){this._total+=RES.getGroupByName(e[n]).length;break}n=0,r=e.length,o.label=1;case 1:return r>n?RES.isGroupLoaded(e[n])?[3,3]:[4,this.loadResGroup(e[n])]:[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.loadResGroup=function(e){var t=this;return new Promise(function(n,r){var o=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,o,t),n()},a=function(e){RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,a,t),r("Group:"+e.groupName+" has failed to load")},i=function(e){t._loaded++,t._progressCallback&&t._progressCallback(t._loaded,t._total)};RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,o,t),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,a,t),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,i,t),RES.loadGroup(e)})},Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e)},enumerable:!0,configurable:!0}),e}();e.ResGroupsLoader=t,__reflect(t.prototype,"alien.ResGroupsLoader")}(alien||(alien={}));